<h3>Question Master<hr></h3>
<table class="table table-striped table-bordered">
    <tr>
    <form method="post">
        <td>Question :</td>
        <td>
            <input class="form-control" name="question" value="{$smarty.request.question}" >
        </td>
        <td>Category :</td>
        <td>
            <input class="form-control" name="category" id="category" value="{$smarty.request.category}" >
            <input type="hidden" name="id_category" id="id_category" value="{$smarty.request.id_category}" >
        </td>
        <td>Sub-Category :</td>
        <td>
            <input class="form-control" name="subcategory" id="subcategory" onfocus="setautocomplete();">
            <input type="hidden" name="id_subcategory" id="id_subcategory">
        </td>
        <td><input type="submit" value="Search"></td>        
    </form>
    </tr>
</table>
<table id="dataTable" class="table table-striped table-bordered" width="100%">
    <thead>    
        <tr>
            <th>Question</th><th>Option-1</th><th>Option-2</th><th>Option-3</th><th>Option-4</th>
            <th>Answer</th><th>Date Created</th>
            <th>&nbsp;<a title="Add Question" href="index.php?module=question&func=edit"><i class="fa fa-plus fa-2x"></i></a></th>
        </tr>
    </thead>
    {foreach from=$question item=mod}
    <tr>
        <td>{$mod.question}</td>
        <td>{$mod.option_1}</td>
        <td>{$mod.option_2}</td>
        <td>{$mod.option_3}</td>
        <td>{$mod.option_4}</td>
        <td>{$mod.answer}</td>
        <td>{$mod.create_date|date_format:"%d/%m/%Y %H:%M:%S"}</td>
        <td>
            <a title="Edit Question" href="index.php?module=question&func=edit&id_question={$mod.id_question}"><i class="fa fa-edit fa-2x"></i></a>
            <a title="Delete Question" href="index.php?module=question&func=delete&id_question={$mod.id_question}" onclick="return confirm('Do you want to delete?');"><i class="fa fa-trash fa-2x"></i></a>
        </td>
    </tr>
    {/foreach}
</table>
<script>
    url = "index.php?module=category&func=search";  
    callauto("category", url, "id_category");
    url = "index.php?module=subcategory&func=search";  
    callauto("subcategory", url, "id_subcategory");
    
    function setautocomplete() {
        id = $("#id_category").val();
        if (id) {
            console.log("added");
            url = "index.php?module=subcategory&func=search&id_category="+id;  
            callauto("subcategory", url, "id_subcategory");
        } else {
            console.log("Destroy");
            $("#subcategory").autocomplete("destroy");
            $("#subcategory").removeData("autocomplete");
        }
    }
</script>